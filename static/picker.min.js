(()=>{var e=class{constructor(){this.hex="#000000",this.rgb_r=0,this.rgb_g=0,this.rgb_b=0,this.xyz_x=0,this.xyz_y=0,this.xyz_z=0,this.luv_l=0,this.luv_u=0,this.luv_v=0,this.lch_l=0,this.lch_c=0,this.lch_h=0,this.hsluv_h=0,this.hsluv_s=0,this.hsluv_l=0,this.hpluv_h=0,this.hpluv_p=0,this.hpluv_l=0,this.r0s=0,this.r0i=0,this.r1s=0,this.r1i=0,this.g0s=0,this.g0i=0,this.g1s=0,this.g1i=0,this.b0s=0,this.b0i=0,this.b1s=0,this.b1i=0}static fromLinear(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}static toLinear(t){return t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92}static yToL(t){return t<=e.epsilon?t/e.refY*e.kappa:116*Math.pow(t/e.refY,1/3)-16}static lToY(t){return t<=8?e.refY*t/e.kappa:e.refY*Math.pow((t+16)/116,3)}static rgbChannelToHex(t){let i=Math.round(t*255),s=i%16,l=(i-s)/16|0;return e.hexChars.charAt(l)+e.hexChars.charAt(s)}static hexToRgbChannel(t,i){let s=e.hexChars.indexOf(t.charAt(i)),l=e.hexChars.indexOf(t.charAt(i+1));return(s*16+l)/255}static distanceFromOriginAngle(t,i,s){let l=i/(Math.sin(s)-t*Math.cos(s));return l<0?1/0:l}static distanceFromOrigin(t,i){return Math.abs(i)/Math.sqrt(Math.pow(t,2)+1)}static min6(t,i,s,l,c,o){return Math.min(t,Math.min(i,Math.min(s,Math.min(l,Math.min(c,o)))))}rgbToHex(){this.hex="#",this.hex+=e.rgbChannelToHex(this.rgb_r),this.hex+=e.rgbChannelToHex(this.rgb_g),this.hex+=e.rgbChannelToHex(this.rgb_b)}hexToRgb(){this.hex=this.hex.toLowerCase(),this.rgb_r=e.hexToRgbChannel(this.hex,1),this.rgb_g=e.hexToRgbChannel(this.hex,3),this.rgb_b=e.hexToRgbChannel(this.hex,5)}xyzToRgb(){this.rgb_r=e.fromLinear(e.m_r0*this.xyz_x+e.m_r1*this.xyz_y+e.m_r2*this.xyz_z),this.rgb_g=e.fromLinear(e.m_g0*this.xyz_x+e.m_g1*this.xyz_y+e.m_g2*this.xyz_z),this.rgb_b=e.fromLinear(e.m_b0*this.xyz_x+e.m_b1*this.xyz_y+e.m_b2*this.xyz_z)}rgbToXyz(){let t=e.toLinear(this.rgb_r),i=e.toLinear(this.rgb_g),s=e.toLinear(this.rgb_b);this.xyz_x=.4123907992659595*t+.35758433938387796*i+.1804807884018343*s,this.xyz_y=.21263900587151036*t+.7151686787677559*i+.07219231536073371*s,this.xyz_z=.01933081871559185*t+.11919477979462599*i+.9505321522496606*s}xyzToLuv(){let t=this.xyz_x+15*this.xyz_y+3*this.xyz_z,i=4*this.xyz_x,s=9*this.xyz_y;t!==0?(i/=t,s/=t):(i=NaN,s=NaN),this.luv_l=e.yToL(this.xyz_y),this.luv_l===0?(this.luv_u=0,this.luv_v=0):(this.luv_u=13*this.luv_l*(i-e.refU),this.luv_v=13*this.luv_l*(s-e.refV))}luvToXyz(){if(this.luv_l===0){this.xyz_x=0,this.xyz_y=0,this.xyz_z=0;return}let t=this.luv_u/(13*this.luv_l)+e.refU,i=this.luv_v/(13*this.luv_l)+e.refV;this.xyz_y=e.lToY(this.luv_l),this.xyz_x=0-9*this.xyz_y*t/((t-4)*i-t*i),this.xyz_z=(9*this.xyz_y-15*i*this.xyz_y-i*this.xyz_x)/(3*i)}luvToLch(){if(this.lch_l=this.luv_l,this.lch_c=Math.sqrt(this.luv_u*this.luv_u+this.luv_v*this.luv_v),this.lch_c<1e-8)this.lch_h=0;else{let t=Math.atan2(this.luv_v,this.luv_u);this.lch_h=t*180/Math.PI,this.lch_h<0&&(this.lch_h=360+this.lch_h)}}lchToLuv(){let t=this.lch_h/180*Math.PI;this.luv_l=this.lch_l,this.luv_u=Math.cos(t)*this.lch_c,this.luv_v=Math.sin(t)*this.lch_c}calculateBoundingLines(t){let i=Math.pow(t+16,3)/1560896,s=i>e.epsilon?i:t/e.kappa,l=s*(284517*e.m_r0-94839*e.m_r2),c=s*(838422*e.m_r2+769860*e.m_r1+731718*e.m_r0),o=s*(632260*e.m_r2-126452*e.m_r1),u=s*(284517*e.m_g0-94839*e.m_g2),_=s*(838422*e.m_g2+769860*e.m_g1+731718*e.m_g0),a=s*(632260*e.m_g2-126452*e.m_g1),m=s*(284517*e.m_b0-94839*e.m_b2),p=s*(838422*e.m_b2+769860*e.m_b1+731718*e.m_b0),d=s*(632260*e.m_b2-126452*e.m_b1);this.r0s=l/o,this.r0i=c*t/o,this.r1s=l/(o+126452),this.r1i=(c-769860)*t/(o+126452),this.g0s=u/a,this.g0i=_*t/a,this.g1s=u/(a+126452),this.g1i=(_-769860)*t/(a+126452),this.b0s=m/d,this.b0i=p*t/d,this.b1s=m/(d+126452),this.b1i=(p-769860)*t/(d+126452)}calcMaxChromaHpluv(){let t=e.distanceFromOrigin(this.r0s,this.r0i),i=e.distanceFromOrigin(this.r1s,this.r1i),s=e.distanceFromOrigin(this.g0s,this.g0i),l=e.distanceFromOrigin(this.g1s,this.g1i),c=e.distanceFromOrigin(this.b0s,this.b0i),o=e.distanceFromOrigin(this.b1s,this.b1i);return e.min6(t,i,s,l,c,o)}calcMaxChromaHsluv(t){let i=t/360*Math.PI*2,s=e.distanceFromOriginAngle(this.r0s,this.r0i,i),l=e.distanceFromOriginAngle(this.r1s,this.r1i,i),c=e.distanceFromOriginAngle(this.g0s,this.g0i,i),o=e.distanceFromOriginAngle(this.g1s,this.g1i,i),u=e.distanceFromOriginAngle(this.b0s,this.b0i,i),_=e.distanceFromOriginAngle(this.b1s,this.b1i,i);return e.min6(s,l,c,o,u,_)}hsluvToLch(){if(this.hsluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hsluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hsluv_l,this.calculateBoundingLines(this.hsluv_l);let t=this.calcMaxChromaHsluv(this.hsluv_h);this.lch_c=t/100*this.hsluv_s}this.lch_h=this.hsluv_h}lchToHsluv(){if(this.lch_l>99.9999999)this.hsluv_s=0,this.hsluv_l=100;else if(this.lch_l<1e-8)this.hsluv_s=0,this.hsluv_l=0;else{this.calculateBoundingLines(this.lch_l);let t=this.calcMaxChromaHsluv(this.lch_h);this.hsluv_s=this.lch_c/t*100,this.hsluv_l=this.lch_l}this.hsluv_h=this.lch_h}hpluvToLch(){if(this.hpluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hpluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hpluv_l,this.calculateBoundingLines(this.hpluv_l);let t=this.calcMaxChromaHpluv();this.lch_c=t/100*this.hpluv_p}this.lch_h=this.hpluv_h}lchToHpluv(){if(this.lch_l>99.9999999)this.hpluv_p=0,this.hpluv_l=100;else if(this.lch_l<1e-8)this.hpluv_p=0,this.hpluv_l=0;else{this.calculateBoundingLines(this.lch_l);let t=this.calcMaxChromaHpluv();this.hpluv_p=this.lch_c/t*100,this.hpluv_l=this.lch_l}this.hpluv_h=this.lch_h}hsluvToRgb(){this.hsluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hpluvToRgb(){this.hpluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hsluvToHex(){this.hsluvToRgb(),this.rgbToHex()}hpluvToHex(){this.hpluvToRgb(),this.rgbToHex()}rgbToHsluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHsluv()}rgbToHpluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHpluv()}hexToHsluv(){this.hexToRgb(),this.rgbToHsluv()}hexToHpluv(){this.hexToRgb(),this.rgbToHpluv()}};e.hexChars="0123456789abcdef";e.refY=1;e.refU=.19783000664283681;e.refV=.468319994938791;e.kappa=903.2962962962963;e.epsilon=.008856451679035631;e.m_r0=3.2409699419045213;e.m_r1=-1.5373831775700935;e.m_r2=-.4986107602930033;e.m_g0=-.9692436362808798;e.m_g1=1.8759675015077206;e.m_g2=.04155505740717561;e.m_b0=.05563007969699361;e.m_b1=-.20397695888897657;e.m_b2=1.0569715142428786;var n=new e,H=0,tt=1,et=2,it=3,st=4,nt=5,ht=6,D=400,R=8,lt=190,pt=D,ft=D;function W(h,t){let i=(h.intercept-t.intercept)/(t.slope-h.slope),s=h.slope*i+h.intercept;return{x:i,y:s}}function $(h){return Math.sqrt(Math.pow(h.x,2)+Math.pow(h.y,2))}function _t(h){return Math.abs(h.intercept)/Math.sqrt(Math.pow(h.slope,2)+1)}function bt(h,t){let i=-1/h.slope,s=t.y-i*t.x;return{slope:i,intercept:s}}function G(h){return Math.atan2(h.y,h.x)}function ot(h){let t=2*Math.PI;return(h%t+t)%t}function vt(h,t){return t.intercept/(Math.sin(h)-t.slope*Math.cos(h))}function yt(h){n.calculateBoundingLines(h);let t=[{slope:n.r0s,intercept:n.r0i},{slope:n.r1s,intercept:n.r1i},{slope:n.g0s,intercept:n.g0i},{slope:n.g1s,intercept:n.g1i},{slope:n.b0s,intercept:n.b0i},{slope:n.b1s,intercept:n.b1i}],i=t.length,s=0,l=null,c=null,o=0;for(;o<i;){let x=o++,b=_t(t[x]);(c==null||b<c)&&(c=b,l=x)}let u=t[l],_={slope:0-1/u.slope,intercept:0},a=W(u,_),m=G(a),p=[],d,T,C,M=0,L=i-1;for(;M<L;){let x=M++,b=x+1;for(;b<i;){let E=b++;d=W(t[x],t[E]),T=G(d),C=T-m,p.push({line1:x,line2:E,intersectionPoint:d,intersectionPointAngle:T,relativeAngle:ot(T-m)})}}p.sort(function(x,b){return x.relativeAngle>b.relativeAngle?1:-1});let F=[],X=[],B=[],S,z,N,k=l,I=0,A=p.length;for(;I<A;){let x=I++;z=p[x],S=null,z.line1===k?S=z.line2:z.line2===k&&(S=z.line1),S!=null&&(k=S,F.push(t[S]),X.push(z.intersectionPoint),B.push(z.intersectionPointAngle),N=$(z.intersectionPoint),N>s&&(s=N))}return{lines:F,vertices:X,angles:B,outerCircleRadius:s,innerCircleRadius:c}}function rt(h,t){let i=G(t),s=h.vertices.length,l,c=Math.PI*2,o=0,u=0;for(;u<s;){let F=u++;l=ot(h.angles[F]-i),l<c&&(c=l,o=F)}let _=(o-1+s)%s,a=h.lines[_];if($(t)<vt(i,a))return t;let m=bt(a,t),p=W(a,m),d=h.vertices[o],T=h.vertices[_],C,M;d.x>T.x?(C=d,M=T):(C=T,M=d);let L;return p.x>C.x?L=C:p.x<M.x?L=M:L=p,L}function Z(h,t,i){let s=parseFloat(h);return t<=s&&s<=i}function j(h){let t=[];for(let i=0;i<h;i++)t.push(i/(h-1));return t}function ct(h,t){let i=t.onDrag,s=t.dragZone||function(){return!0},l=!1;function c(a){let m=h.getBoundingClientRect(),p,d;a.touches?(p=a.touches[0].clientX,d=a.touches[0].clientY):(p=a.clientX,d=a.clientY);let T=m.width,C=m.height,M=(p-m.left)/T,L=(d-m.top)/C;return{x:Math.min(1,Math.max(0,M)),y:Math.min(1,Math.max(0,L))}}function o(a){if(a.which!==3){let m=c(a);s(m)&&(l=!0,a.preventDefault(),i(m))}}function u(){l=!1}function _(a){l&&(a.preventDefault(),i(c(a)))}h.addEventListener("mousedown",o),h.addEventListener("touchstart",o),document.addEventListener("mousemove",_),document.addEventListener("touchmove",_),document.addEventListener("mouseup",u),document.addEventListener("touchend",u)}var V=class{constructor(t,i,s){let l=this;this.element=t,this.val=i,this.handle=document.createElement("div"),this.handle.className="range-slider-handle",this.rangeWidth=this.element.getBoundingClientRect().width,t.appendChild(this.handle);function c(o){l.setVal(o.x),s(o.x)}ct(this.element,{onDrag:c})}setVal(t){this.val=t,this.handle.style.left=this.val*this.rangeWidth-5+"px"}setBackground(t){this.element.style.background="linear-gradient(to right,"+t.join(",")+")"}};document.addEventListener("DOMContentLoaded",function(){let h=0,t=100,i=50,s=1,l,c,o=document.getElementById("picker"),u=o.getElementsByTagName("canvas")[0].getContext("2d"),_=document.getElementById("control-l"),a=document.getElementById("control-s"),m=document.getElementById("control-h"),p=_.getElementsByClassName("range-slider")[0],d=a.getElementsByClassName("range-slider")[0],T=m.getElementsByClassName("range-slider")[0],C=o.getElementsByClassName("input-hex")[0],M=o.getElementsByClassName("counter-hue")[0],L=o.getElementsByClassName("counter-saturation")[0],F=o.getElementsByClassName("counter-lightness")[0],X=o.getElementsByClassName("swatch")[0],B=o.getElementsByTagName("svg")[0],S=new V(p,.5,function(r){i=r*100,P(!1,!1,!0,et)}),z=new V(d,.5,function(r){t=r*100,P(!1,!0,!1,tt)}),N=new V(T,0,function(r){h=r*360,P(!0,!1,!0,H)});M.addEventListener("input",function(){Z(this.value,0,360)&&(h=parseFloat(this.value),P(!0,!1,!1,it))}),L.addEventListener("input",function(){Z(this.value,0,100)&&(t=parseFloat(this.value),P(!1,!0,!1,st))}),F.addEventListener("input",function(){Z(this.value,0,100)&&(i=parseFloat(this.value),P(!1,!1,!0,nt))});function k(r){return{x:r.x*s+200,y:200-r.y*s}}function I(r){return{x:(r.x-200)/s,y:(200-r.y)/s}}let A=k({x:0,y:0}),x=document.createElementNS("http://www.w3.org/2000/svg","circle");x.setAttribute("cx",A.x.toString()),x.setAttribute("cy",A.y.toString()),x.setAttribute("fill","none"),x.setAttribute("stroke-width","2"),B.appendChild(x);let b=document.createElementNS("http://www.w3.org/2000/svg","circle");b.setAttribute("cx",A.x.toString()),b.setAttribute("cy",A.y.toString()),b.setAttribute("r",2 .toString()),B.appendChild(b);let E=document.createElementNS("http://www.w3.org/2000/svg","circle");E.setAttribute("cx",A.x.toString()),E.setAttribute("cy",A.y.toString()),E.setAttribute("r",lt.toString()),E.setAttribute("fill","none"),E.setAttribute("stroke","white"),E.setAttribute("stroke-width","1"),B.appendChild(E);let v=document.createElementNS("http://www.w3.org/2000/svg","circle");v.setAttribute("cx",A.x.toString()),v.setAttribute("cy",A.y.toString()),v.setAttribute("r","4"),v.setAttribute("fill","none"),v.setAttribute("stroke-width","2"),v.style.display="none",v.className="scope",B.appendChild(v);function at(r){let f=I({x:r.x*D,y:r.y*D});f=rt(l,f);let y=f.x,g=f.y;n.luv_l=i,n.luv_u=y,n.luv_v=g,n.luvToLch(),n.lchToHsluv(),h=n.hsluv_h,t=n.hsluv_s,P(!0,!0,!1,null)}function ut(r){let f=l.outerCircleRadius;return $(I({x:r.x*D,y:r.y*D}))<f}ct(B,{onDrag:at,dragZone:ut});function gt(){let r=l.vertices.map(k);if(u.clearRect(0,0,ft,pt),u.globalCompositeOperation="source-over",i===0||i===100)return;let f=[],y=[],g;for(let w=0;w<r.length;w++)g=r[w],f.push(g.x),y.push(g.y);let O=Math.floor(Math.min.apply(Math,f)/R),Y=Math.floor(Math.min.apply(Math,y)/R),U=Math.ceil(Math.max.apply(Math,f)/R),dt=Math.ceil(Math.max.apply(Math,y)/R);for(let w=O;w<U;w++)for(let q=Y;q<dt;q++){let J=w*R,K=q*R,mt=I({x:J+R/2,y:K+R/2}),Q=rt(l,mt);n.luv_l=i,n.luv_u=Q.x,n.luv_v=Q.y,n.luvToXyz(),n.xyzToRgb(),n.rgbToHex(),u.fillStyle=n.hex,u.fillRect(J,K,R,R)}u.globalCompositeOperation="destination-in",u.beginPath(),u.moveTo(r[0].x,r[0].y);for(let w=1;w<r.length;w++)g=r[w],u.lineTo(g.x,g.y);u.closePath(),u.fill()}function xt(){if(b.setAttribute("fill",c),x.setAttribute("stroke",c),i!==0&&i!==100){n.calculateBoundingLines(i);let O=n.calcMaxChromaHsluv(h)*t/100,Y=h/360*2*Math.PI,U=k({x:O*Math.cos(Y),y:O*Math.sin(Y)});v.setAttribute("cx",U.x.toString()),v.setAttribute("cy",U.y.toString()),v.setAttribute("stroke",c),v.style.display="inline",x.setAttribute("r",(s*l.innerCircleRadius).toString())}else v.style.display="none",x.setAttribute("r","0");let r=j(20).map(function(g){return n.hsluv_h=g*360,n.hsluv_s=t,n.hsluv_l=i,n.hsluvToHex(),n.hex}),f=j(10).map(function(g){return n.hsluv_h=h,n.hsluv_s=g*100,n.hsluv_l=i,n.hsluvToHex(),n.hex}),y=j(10).map(function(g){return n.hsluv_h=h,n.hsluv_s=t,n.hsluv_l=g*100,n.hsluvToHex(),n.hex});N.setBackground(r),z.setBackground(f),S.setBackground(y)}function P(r,f,y,g){y&&(c=i>70?"#1b1b1b":"#ffffff",l=yt(i),s=lt/l.outerCircleRadius),xt(),n.hsluv_h=h,n.hsluv_s=t,n.hsluv_l=i,n.hsluvToHex();let O=n.hex;X.style.backgroundColor=O,g!==ht&&(C.value=O),y&&gt(),r&&g!==H&&N.setVal(h/360),f&&g!==tt&&z.setVal(t/100),y&&g!==et&&S.setVal(i/100),r&&g!==it&&(M.value=h.toFixed(1)),f&&g!==st&&(L.value=t.toFixed(1)),y&&g!==nt&&(F.value=i.toFixed(1))}C.addEventListener("input",function(){let r=C.value.match(/^\s*#?([\da-f]{6})\s*$/i);if(r){let f=r[1];n.hex="#"+f,n.hexToHsluv(),h=n.hsluv_h,t=n.hsluv_s,i=n.hsluv_l,P(!0,!0,!0,ht)}}),P(!0,!0,!0,null)});})();
