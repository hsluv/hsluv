(()=>{var v=class t{constructor(){this.hex="#000000",this.rgb_r=0,this.rgb_g=0,this.rgb_b=0,this.xyz_x=0,this.xyz_y=0,this.xyz_z=0,this.luv_l=0,this.luv_u=0,this.luv_v=0,this.lch_l=0,this.lch_c=0,this.lch_h=0,this.hsluv_h=0,this.hsluv_s=0,this.hsluv_l=0,this.hpluv_h=0,this.hpluv_p=0,this.hpluv_l=0,this.r0s=0,this.r0i=0,this.r1s=0,this.r1i=0,this.g0s=0,this.g0i=0,this.g1s=0,this.g1i=0,this.b0s=0,this.b0i=0,this.b1s=0,this.b1i=0}static fromLinear(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055}static toLinear(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92}static yToL(e){return e<=t.epsilon?e/t.refY*t.kappa:116*Math.pow(e/t.refY,1/3)-16}static lToY(e){return e<=8?t.refY*e/t.kappa:t.refY*Math.pow((e+16)/116,3)}static rgbChannelToHex(e){let s=Math.round(e*255),i=s%16,n=(s-i)/16|0;return t.hexChars.charAt(n)+t.hexChars.charAt(i)}static hexToRgbChannel(e,s){let i=t.hexChars.indexOf(e.charAt(s)),n=t.hexChars.indexOf(e.charAt(s+1));return(i*16+n)/255}static distanceFromOriginAngle(e,s,i){let n=s/(Math.sin(i)-e*Math.cos(i));return n<0?1/0:n}static distanceFromOrigin(e,s){return Math.abs(s)/Math.sqrt(Math.pow(e,2)+1)}static min6(e,s,i,n,o,r){return Math.min(e,Math.min(s,Math.min(i,Math.min(n,Math.min(o,r)))))}rgbToHex(){this.hex="#",this.hex+=t.rgbChannelToHex(this.rgb_r),this.hex+=t.rgbChannelToHex(this.rgb_g),this.hex+=t.rgbChannelToHex(this.rgb_b)}hexToRgb(){this.hex=this.hex.toLowerCase(),this.rgb_r=t.hexToRgbChannel(this.hex,1),this.rgb_g=t.hexToRgbChannel(this.hex,3),this.rgb_b=t.hexToRgbChannel(this.hex,5)}xyzToRgb(){this.rgb_r=t.fromLinear(t.m_r0*this.xyz_x+t.m_r1*this.xyz_y+t.m_r2*this.xyz_z),this.rgb_g=t.fromLinear(t.m_g0*this.xyz_x+t.m_g1*this.xyz_y+t.m_g2*this.xyz_z),this.rgb_b=t.fromLinear(t.m_b0*this.xyz_x+t.m_b1*this.xyz_y+t.m_b2*this.xyz_z)}rgbToXyz(){let e=t.toLinear(this.rgb_r),s=t.toLinear(this.rgb_g),i=t.toLinear(this.rgb_b);this.xyz_x=.41239079926595*e+.35758433938387*s+.18048078840183*i,this.xyz_y=.21263900587151*e+.71516867876775*s+.072192315360733*i,this.xyz_z=.019330818715591*e+.11919477979462*s+.95053215224966*i}xyzToLuv(){let e=this.xyz_x+15*this.xyz_y+3*this.xyz_z,s=4*this.xyz_x,i=9*this.xyz_y;e!==0?(s/=e,i/=e):(s=NaN,i=NaN),this.luv_l=t.yToL(this.xyz_y),this.luv_l===0?(this.luv_u=0,this.luv_v=0):(this.luv_u=13*this.luv_l*(s-t.refU),this.luv_v=13*this.luv_l*(i-t.refV))}luvToXyz(){if(this.luv_l===0){this.xyz_x=0,this.xyz_y=0,this.xyz_z=0;return}let e=this.luv_u/(13*this.luv_l)+t.refU,s=this.luv_v/(13*this.luv_l)+t.refV;this.xyz_y=t.lToY(this.luv_l),this.xyz_x=0-9*this.xyz_y*e/((e-4)*s-e*s),this.xyz_z=(9*this.xyz_y-15*s*this.xyz_y-s*this.xyz_x)/(3*s)}luvToLch(){if(this.lch_l=this.luv_l,this.lch_c=Math.sqrt(this.luv_u*this.luv_u+this.luv_v*this.luv_v),this.lch_c<1e-8)this.lch_h=0;else{let e=Math.atan2(this.luv_v,this.luv_u);this.lch_h=e*180/Math.PI,this.lch_h<0&&(this.lch_h=360+this.lch_h)}}lchToLuv(){let e=this.lch_h/180*Math.PI;this.luv_l=this.lch_l,this.luv_u=Math.cos(e)*this.lch_c,this.luv_v=Math.sin(e)*this.lch_c}calculateBoundingLines(e){let s=Math.pow(e+16,3)/1560896,i=s>t.epsilon?s:e/t.kappa,n=i*(284517*t.m_r0-94839*t.m_r2),o=i*(838422*t.m_r2+769860*t.m_r1+731718*t.m_r0),r=i*(632260*t.m_r2-126452*t.m_r1),u=i*(284517*t.m_g0-94839*t.m_g2),f=i*(838422*t.m_g2+769860*t.m_g1+731718*t.m_g0),c=i*(632260*t.m_g2-126452*t.m_g1),d=i*(284517*t.m_b0-94839*t.m_b2),m=i*(838422*t.m_b2+769860*t.m_b1+731718*t.m_b0),x=i*(632260*t.m_b2-126452*t.m_b1);this.r0s=n/r,this.r0i=o*e/r,this.r1s=n/(r+126452),this.r1i=(o-769860)*e/(r+126452),this.g0s=u/c,this.g0i=f*e/c,this.g1s=u/(c+126452),this.g1i=(f-769860)*e/(c+126452),this.b0s=d/x,this.b0i=m*e/x,this.b1s=d/(x+126452),this.b1i=(m-769860)*e/(x+126452)}calcMaxChromaHpluv(){let e=t.distanceFromOrigin(this.r0s,this.r0i),s=t.distanceFromOrigin(this.r1s,this.r1i),i=t.distanceFromOrigin(this.g0s,this.g0i),n=t.distanceFromOrigin(this.g1s,this.g1i),o=t.distanceFromOrigin(this.b0s,this.b0i),r=t.distanceFromOrigin(this.b1s,this.b1i);return t.min6(e,s,i,n,o,r)}calcMaxChromaHsluv(e){let s=e/360*Math.PI*2,i=t.distanceFromOriginAngle(this.r0s,this.r0i,s),n=t.distanceFromOriginAngle(this.r1s,this.r1i,s),o=t.distanceFromOriginAngle(this.g0s,this.g0i,s),r=t.distanceFromOriginAngle(this.g1s,this.g1i,s),u=t.distanceFromOriginAngle(this.b0s,this.b0i,s),f=t.distanceFromOriginAngle(this.b1s,this.b1i,s);return t.min6(i,n,o,r,u,f)}hsluvToLch(){if(this.hsluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hsluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hsluv_l,this.calculateBoundingLines(this.hsluv_l);let e=this.calcMaxChromaHsluv(this.hsluv_h);this.lch_c=e/100*this.hsluv_s}this.lch_h=this.hsluv_h}lchToHsluv(){if(this.lch_l>99.9999999)this.hsluv_s=0,this.hsluv_l=100;else if(this.lch_l<1e-8)this.hsluv_s=0,this.hsluv_l=0;else{this.calculateBoundingLines(this.lch_l);let e=this.calcMaxChromaHsluv(this.lch_h);this.hsluv_s=this.lch_c/e*100,this.hsluv_l=this.lch_l}this.hsluv_h=this.lch_h}hpluvToLch(){if(this.hpluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hpluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hpluv_l,this.calculateBoundingLines(this.hpluv_l);let e=this.calcMaxChromaHpluv();this.lch_c=e/100*this.hpluv_p}this.lch_h=this.hpluv_h}lchToHpluv(){if(this.lch_l>99.9999999)this.hpluv_p=0,this.hpluv_l=100;else if(this.lch_l<1e-8)this.hpluv_p=0,this.hpluv_l=0;else{this.calculateBoundingLines(this.lch_l);let e=this.calcMaxChromaHpluv();this.hpluv_p=this.lch_c/e*100,this.hpluv_l=this.lch_l}this.hpluv_h=this.lch_h}hsluvToRgb(){this.hsluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hpluvToRgb(){this.hpluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hsluvToHex(){this.hsluvToRgb(),this.rgbToHex()}hpluvToHex(){this.hpluvToRgb(),this.rgbToHex()}rgbToHsluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHsluv()}rgbToHpluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHpluv()}hexToHsluv(){this.hexToRgb(),this.rgbToHsluv()}hexToHpluv(){this.hexToRgb(),this.rgbToHpluv()}};v.hexChars="0123456789abcdef";v.refY=1;v.refU=.19783000664283;v.refV=.46831999493879;v.kappa=903.2962962;v.epsilon=.0088564516;v.m_r0=3.240969941904521;v.m_r1=-1.537383177570093;v.m_r2=-.498610760293;v.m_g0=-.96924363628087;v.m_g1=1.87596750150772;v.m_g2=.041555057407175;v.m_b0=.055630079696993;v.m_b1=-.20397695888897;v.m_b2=1.056971514242878;var l=new v,Q=0,tt=1,et=2,st=3,it=4,lt=5,nt=6,I=400,E=8,ht=190,mt=I,pt=I;function j(t,e){let s=(t.intercept-e.intercept)/(e.slope-t.slope),i=t.slope*s+t.intercept;return{x:s,y:i}}function G(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function ft(t){return Math.abs(t.intercept)/Math.sqrt(Math.pow(t.slope,2)+1)}function _t(t,e){let s=-1/t.slope,i=e.y-s*e.x;return{slope:s,intercept:i}}function W(t){return Math.atan2(t.y,t.x)}function ot(t){let e=2*Math.PI;return(t%e+e)%e}function bt(t,e){return e.intercept/(Math.sin(t)-e.slope*Math.cos(t))}function yt(t){l.calculateBoundingLines(t);let e=[{slope:l.r0s,intercept:l.r0i},{slope:l.r1s,intercept:l.r1i},{slope:l.g0s,intercept:l.g0i},{slope:l.g1s,intercept:l.g1i},{slope:l.b0s,intercept:l.b0i},{slope:l.b1s,intercept:l.b1i}],s=e.length,i=0,n=null,o=null,r=0;for(;r<s;){let g=r++,_=ft(e[g]);(o==null||_<o)&&(o=_,n=g)}let u=e[n],f={slope:0-1/u.slope,intercept:0},c=j(u,f),d=W(c),m=[],x,T,C,M=0,L=s-1;for(;M<L;){let g=M++,_=g+1;for(;_<s;){let H=_++;x=j(e[g],e[H]),T=W(x),C=T-d,m.push({line1:g,line2:H,intersectionPoint:x,intersectionPointAngle:T,relativeAngle:ot(T-d)})}}m.sort(function(g,_){return g.relativeAngle>_.relativeAngle?1:-1});let P=[],V=[],F=[],R,z,O,B=n,N=0,A=m.length;for(;N<A;){let g=N++;z=m[g],R=null,z.line1===B?R=z.line2:z.line2===B&&(R=z.line1),R!=null&&(B=R,P.push(e[R]),V.push(z.intersectionPoint),F.push(z.intersectionPointAngle),O=G(z.intersectionPoint),O>i&&(i=O))}return{lines:P,vertices:V,angles:F,outerCircleRadius:i,innerCircleRadius:o}}function rt(t,e){let s=W(e),i=t.vertices.length,n,o=Math.PI*2,r=0,u=0;for(;u<i;){let P=u++;n=ot(t.angles[P]-s),n<o&&(o=n,r=P)}let f=(r-1+i)%i,c=t.lines[f];if(G(e)<bt(s,c))return e;let d=_t(c,e),m=j(c,d),x=t.vertices[r],T=t.vertices[f],C,M;x.x>T.x?(C=x,M=T):(C=T,M=x);let L;return m.x>C.x?L=C:m.x<M.x?L=M:L=m,L}function q(t,e,s){let i=parseFloat(t);return e<=i&&i<=s}function Z(t){let e=[];for(let s=0;s<t;s++)e.push(s/(t-1));return e}function ct(t,e){let s=e.onDrag,i=e.dragZone||function(){return!0},n=!1;function o(c){let d=t.getBoundingClientRect(),m,x;c.touches?(m=c.touches[0].clientX,x=c.touches[0].clientY):(m=c.clientX,x=c.clientY);let T=d.width,C=d.height,M=(m-d.left)/T,L=(x-d.top)/C;return{x:Math.min(1,Math.max(0,M)),y:Math.min(1,Math.max(0,L))}}function r(c){if(c.which!==3){let d=o(c);i(d)&&(n=!0,c.preventDefault(),s(d))}}function u(){n=!1}function f(c){n&&(c.preventDefault(),s(o(c)))}t.addEventListener("mousedown",r),t.addEventListener("touchstart",r),document.addEventListener("mousemove",f),document.addEventListener("touchmove",f),document.addEventListener("mouseup",u),document.addEventListener("touchend",u)}var D=class{constructor(e,s,i){let n=this;this.element=e,this.val=s,this.handle=document.createElement("div"),this.handle.className="range-slider-handle",this.rangeWidth=this.element.getBoundingClientRect().width,e.appendChild(this.handle);function o(r){n.setVal(r.x),i(r.x)}ct(this.element,{onDrag:o})}setVal(e){this.val=e,this.handle.style.left=this.val*this.rangeWidth-5+"px"}setBackground(e){this.element.style.background="linear-gradient(to right,"+e.join(",")+")"}};document.addEventListener("DOMContentLoaded",function(){let t=0,e=100,s=50,i=1,n,o,r=document.getElementById("picker"),u=r.getElementsByTagName("canvas")[0].getContext("2d"),f=document.getElementById("control-l"),c=document.getElementById("control-s"),d=document.getElementById("control-h"),m=f.getElementsByClassName("range-slider")[0],x=c.getElementsByClassName("range-slider")[0],T=d.getElementsByClassName("range-slider")[0],C=r.getElementsByClassName("input-hex")[0],M=r.getElementsByClassName("counter-hue")[0],L=r.getElementsByClassName("counter-saturation")[0],P=r.getElementsByClassName("counter-lightness")[0],V=r.getElementsByClassName("swatch")[0],F=r.getElementsByTagName("svg")[0],R=new D(m,.5,function(h){s=h*100,S(!1,!1,!0,et)}),z=new D(x,.5,function(h){e=h*100,S(!1,!0,!1,tt)}),O=new D(T,0,function(h){t=h*360,S(!0,!1,!0,Q)});M.addEventListener("input",function(){q(this.value,0,360)&&(t=parseFloat(this.value),S(!0,!1,!1,st))}),L.addEventListener("input",function(){q(this.value,0,100)&&(e=parseFloat(this.value),S(!1,!0,!1,it))}),P.addEventListener("input",function(){q(this.value,0,100)&&(s=parseFloat(this.value),S(!1,!1,!0,lt))});function B(h){return{x:h.x*i+200,y:200-h.y*i}}function N(h){return{x:(h.x-200)/i,y:(200-h.y)/i}}let A=B({x:0,y:0}),g=document.createElementNS("http://www.w3.org/2000/svg","circle");g.setAttribute("cx",A.x.toString()),g.setAttribute("cy",A.y.toString()),g.setAttribute("fill","none"),g.setAttribute("stroke-width","2"),F.appendChild(g);let _=document.createElementNS("http://www.w3.org/2000/svg","circle");_.setAttribute("cx",A.x.toString()),_.setAttribute("cy",A.y.toString()),_.setAttribute("r","2"),F.appendChild(_);let H=document.createElementNS("http://www.w3.org/2000/svg","circle");H.setAttribute("cx",A.x.toString()),H.setAttribute("cy",A.y.toString()),H.setAttribute("r",ht.toString()),H.setAttribute("fill","none"),H.setAttribute("stroke","white"),H.setAttribute("stroke-width","1"),F.appendChild(H);let b=document.createElementNS("http://www.w3.org/2000/svg","circle");b.setAttribute("cx",A.x.toString()),b.setAttribute("cy",A.y.toString()),b.setAttribute("r","4"),b.setAttribute("fill","none"),b.setAttribute("stroke-width","2"),b.style.display="none",b.className="scope",F.appendChild(b);function ut(h){let p=N({x:h.x*I,y:h.y*I});p=rt(n,p);let y=p.x,a=p.y;l.luv_l=s,l.luv_u=y,l.luv_v=a,l.luvToLch(),l.lchToHsluv(),t=l.hsluv_h,e=l.hsluv_s,S(!0,!0,!1,null)}function at(h){let p=n.outerCircleRadius;return G(N({x:h.x*I,y:h.y*I}))<p}ct(F,{onDrag:ut,dragZone:at});function gt(){let h=n.vertices.map(B);if(u.clearRect(0,0,pt,mt),u.globalCompositeOperation="source-over",s===0||s===100)return;let p=[],y=[],a;for(let w=0;w<h.length;w++)a=h[w],p.push(a.x),y.push(a.y);let k=Math.floor(Math.min.apply(Math,p)/E),X=Math.floor(Math.min.apply(Math,y)/E),Y=Math.ceil(Math.max.apply(Math,p)/E),xt=Math.ceil(Math.max.apply(Math,y)/E);for(let w=k;w<Y;w++)for(let U=X;U<xt;U++){let $=w*E,J=U*E,dt=N({x:$+E/2,y:J+E/2}),K=rt(n,dt);l.luv_l=s,l.luv_u=K.x,l.luv_v=K.y,l.luvToXyz(),l.xyzToRgb(),l.rgbToHex(),u.fillStyle=l.hex,u.fillRect($,J,E,E)}u.globalCompositeOperation="destination-in",u.beginPath(),u.moveTo(h[0].x,h[0].y);for(let w=1;w<h.length;w++)a=h[w],u.lineTo(a.x,a.y);u.closePath(),u.fill()}function vt(){if(_.setAttribute("fill",o),g.setAttribute("stroke",o),s!==0&&s!==100){l.calculateBoundingLines(s);let k=l.calcMaxChromaHsluv(t)*e/100,X=t/360*2*Math.PI,Y=B({x:k*Math.cos(X),y:k*Math.sin(X)});b.setAttribute("cx",Y.x.toString()),b.setAttribute("cy",Y.y.toString()),b.setAttribute("stroke",o),b.style.display="inline",g.setAttribute("r",(i*n.innerCircleRadius).toString())}else b.style.display="none",g.setAttribute("r","0");let h=Z(20).map(function(a){return l.hsluv_h=a*360,l.hsluv_s=e,l.hsluv_l=s,l.hsluvToHex(),l.hex}),p=Z(10).map(function(a){return l.hsluv_h=t,l.hsluv_s=a*100,l.hsluv_l=s,l.hsluvToHex(),l.hex}),y=Z(10).map(function(a){return l.hsluv_h=t,l.hsluv_s=e,l.hsluv_l=a*100,l.hsluvToHex(),l.hex});O.setBackground(h),z.setBackground(p),R.setBackground(y)}function S(h,p,y,a){y&&(o=s>70?"#1b1b1b":"#ffffff",n=yt(s),i=ht/n.outerCircleRadius),vt(),l.hsluv_h=t,l.hsluv_s=e,l.hsluv_l=s,l.hsluvToHex();let k=l.hex;V.style.backgroundColor=k,a!==nt&&(C.value=k),y&&gt(),h&&a!==Q&&O.setVal(t/360),p&&a!==tt&&z.setVal(e/100),y&&a!==et&&R.setVal(s/100),h&&a!==st&&(M.value=t.toFixed(1)),p&&a!==it&&(L.value=e.toFixed(1)),y&&a!==lt&&(P.value=s.toFixed(1))}C.addEventListener("input",function(){let h=C.value.match(/^\s*#?([\da-f]{6})\s*$/i);if(h){let p=h[1];l.hex="#"+p,l.hexToHsluv(),t=l.hsluv_h,e=l.hsluv_s,s=l.hsluv_l,S(!0,!0,!0,nt)}}),S(!0,!0,!0,null)});})();
